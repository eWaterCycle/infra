# {{ ansible_managed }}

c.JupyterHub.admin_access = True
c.JupyterHub.services = [
     {
         'name': 'experiment-launcher',
         'admin': True,
         'api_token': '{{ launcher_jupyterhub_token }}',
     },
    {
        'name': 'cull-idle',
        'admin': True,
        'command': ['/usr/local/bin/cull_idle_servers.py', '--timeout={{ cull.timeout }}', '--max_age={{ cull.max_age }}'],
    }
]
c.Authenticator.admin_users = {'admin'}
c.Spawner.default_url = '/lab'
c.Spawner.cmd = ['jupyter-labhub']
c.JupyterHub.ssl_key = '/etc/letsencrypt/live/{{ inventory_hostname }}/privkey.pem'
c.JupyterHub.ssl_cert = '/etc/letsencrypt/live/{{ inventory_hostname }}/fullchain.pem'
c.JupyterHub.port = 443
c.Authenticator.whitelist = { {% for user in posix_users %}
    '{{ user.name }}'{% if not loop.last %},{% endif %}
{% endfor %} }
