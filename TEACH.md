# Teaching with eWaterCycle infra

The grading setup is [one class, one grader](https://nbgrader.readthedocs.io/en/stable/configuration/jupyterhub_config.html#example-use-case-one-class-one-grader).

## Surf Research Cloud configuration

In the SRC component

- Add `grader_user` parameter with username of person who will be grading. 
  Use `==USERNAME==` as default value, which will be replaced by the actual username of the user creating the workspace.
  This user will also be responsible for setting up the course and assignments.
- Add `students` parameter with list of student usernames and hashed passwords.
  The value should be a JSON string in format of `[["username1", "password1"]]`.
  The value can be generated by running [create_student_passwords.py](create_student_passwords.py) script with list of username (one on each line) as input.

In the SRC catalog item

- Expose `grader_user` and `student_users` as interactive parameters.

## Students

Students can be managed with [nbgrader labextension & cli](https://nbgrader.readthedocs.io/en/stable/user_guide/managing_the_database.html#managing-students)

The student id is a posix username in the VM.
In a ewatercycle VM users can be added during workspace creation or with [Surf Research Access Management](https://sram.surf.nl/). 
After sram invite a cronjob will add the user to the VM. Login with totp as password.

## Create assignment

1. In menu goto Nbgrader -> Formgrader -> Manage Assignments -> Add new Assignment.
2. Click on edit to navigate to folder (`~/hydrolog101/source/<name of assignment>`).
3. Create a notebook with assignment annotations using the `Create Assignment` sidebar.
4. In FormGrader press Generate, Preview, Release buttons.

## Fetch assignment

1. In menu got Nbgrader -> Assignments
2. Press fetch button
